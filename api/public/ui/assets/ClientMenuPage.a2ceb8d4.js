import{d as N,c as f,r as _,ah as U,aq as p,ar as V,o as r,e as y,w as n,af as h,O as q,U as x,f as l,as as D,J as O,ai as C,am as Q,u,al as $,at as L,au as S,L as T,av as b,aw as E}from"./index.04fb470e.js";import{Q as K}from"./QPage.35b7a6ff.js";import{i as m}from"./index.6925d095.js";import{_ as A,a as F}from"./ProductDetailed.adb69d4d.js";import{u as P}from"./notification.bcef4808.js";import"./QChip.2f03b717.js";import"./router.1722d853.js";const j={class:"row q-col-gutter-sm"},Z=N({__name:"ClientMenuPage",setup(z){const i=m(h),v=m(q),g=m(x),w=f(()=>i.onsale),o=_(),s=_(!1),k=f(()=>g.isCamarero);async function c(a){try{await i.listOnsale({category_id:a})}catch(e){P.axiosError(e)}}function B(a){s.value=!1,o.value=void 0,v.addToCart({product_id:a.product.id,qty:a.qty,product:a.product})}function M(a){o.value=a,s.value=!0}return U(async()=>{p("Menu"),await c()}),V(a=>{const e=a.query.category;if(e){c(Number(e));const t=i.categories.find(d=>d.id==Number(e));t&&p(t.title)}else c()}),(a,e)=>(r(),y(K,{padding:""},{default:n(()=>[l(L,{class:"no-box-shadow"},{default:n(()=>[l(D,null,{default:n(()=>[O("div",j,[(r(!0),C($,null,Q(u(w),(t,d)=>(r(),C("div",{class:b(u(E)),key:`p-${t.id}-${d}`},[l(F,{class:"cursor-pointer",data:t,onClick:H=>M(t)},null,8,["data","onClick"])],2))),128))])]),_:1})]),_:1}),o.value?(r(),y(S,{key:0,modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t)},{default:n(()=>[l(A,{data:o.value,class:"dialog-form",cart:u(k),onAddToCart:B},null,8,["data","cart"])]),_:1},8,["modelValue"])):T("",!0)]),_:1}))}});export{Z as default};
