import{d as C,o as u,e as Q,w as t,f as e,as as p,J as b,K as B,at as y,af as w,r as v,ah as S,b3 as D,aI as E,aA as F,Q as _,c as M,aq as h,ai as g,au as A,al as x,am as L,u as k,aM as q,av as I,aL as N}from"./index.04fb470e.js";import{Q as U}from"./QPage.35b7a6ff.js";import{i as V}from"./index.6925d095.js";import{Q as K}from"./QForm.88d99e78.js";import{u as O}from"./notification.bcef4808.js";import"./router.1722d853.js";const P={class:"text-h6"},T=C({__name:"CategoryWidget",props:{data:null},setup(d){return(i,o)=>(u(),Q(y,null,{default:t(()=>[e(p,null,{default:t(()=>[b("div",P,B(d.data.title),1)]),_:1})]),_:1}))}}),j=C({__name:"CategoryForm",props:{update:null},emits:["completed","remove"],setup(d,{emit:i}){const o=d,l=V(w),a=v({tag:"",title:""});async function f(){try{o.update?await l.updateCategory(o.update.id,a.value):await l.createCategory(a.value),i("completed")}catch(c){O.axiosError(c)}}return S(()=>{o.update&&(a.value={tag:o.update.tag,title:o.update.title})}),(c,s)=>(u(),Q(y,null,{default:t(()=>[e(K,{onSubmit:D(f,["prevent"])},{default:t(()=>[e(p,null,{default:t(()=>[e(E,{modelValue:a.value.title,"onUpdate:modelValue":s[0]||(s[0]=r=>a.value.title=r),type:"text",label:"Categoria"},null,8,["modelValue"])]),_:1}),e(F,null,{default:t(()=>[e(_,{color:"primary",icon:"mdi-check",label:"Guardar",type:"submit"}),e(_,{color:"negative",icon:"mdi-delete",outline:"",label:"Eliminar",onClick:s[1]||(s[1]=r=>i("remove"))})]),_:1})]),_:1},8,["onSubmit"])]),_:1}))}}),z={class:"row q-col-gutter-sm"},Z=C({__name:"CategoriesPage",setup(d){const i=V(w),o=M(()=>i.categories),l=v(),a=v(!1);function f(r){l.value=r,a.value=!0}function c(){l.value&&q.create({title:"Eliminar Categoria",message:`Desea eliminar la categoria ${l.value.title}`,ok:"SI"}).onOk(async()=>{l.value&&await i.removeCategory(l.value.id),s()})}function s(){a.value=!1,l.value=void 0}return S(async()=>{h("Categor\xEDas"),await i.listCategories()}),(r,m)=>(u(),g(x,null,[e(U,{padding:""},{default:t(()=>[e(y,{class:"no-box-shadow"},{default:t(()=>[e(p,null,{default:t(()=>[e(_,{icon:"mdi-plus",label:"A\xF1adir Categoria",class:"full-width",color:"primary",onClick:m[0]||(m[0]=()=>{s(),a.value=!0})})]),_:1})]),_:1}),e(p,{class:"q-px-none"},{default:t(()=>[b("div",z,[(u(!0),g(x,null,L(k(o),(n,$)=>(u(),g("div",{class:I(k(N)),key:`cat-${n.id}-${$}`},[e(T,{data:n,onClick:G=>f(n)},null,8,["data","onClick"])],2))),128))])]),_:1})]),_:1}),e(A,{modelValue:a.value,"onUpdate:modelValue":m[1]||(m[1]=n=>a.value=n)},{default:t(()=>[e(j,{update:l.value,class:"dialog-form",onCompleted:s,onRemove:c},null,8,["update"])]),_:1},8,["modelValue"])],64))}});export{Z as default};
