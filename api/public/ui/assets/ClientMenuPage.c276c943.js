import{d as k,h,r as u,ah as B,aq as m,ar as M,o as r,c as f,w as n,ae as N,O as V,e as l,as as q,I as x,ai as _,am as D,K as p,al as O,at as Q,au as $,L,av as S,aw as T}from"./index.4424682c.js";import{Q as b}from"./QPage.bb2e11f4.js";import{i as v}from"./index.6f2cfc2b.js";import{_ as E,a as K}from"./ProductDetailed.396a999e.js";import{u as U}from"./notification.7df50ca5.js";import"./QChip.121929ac.js";import"./router.1445b5b4.js";const A={class:"row q-col-gutter-sm"},W=k({__name:"ClientMenuPage",setup(F){const i=v(N),y=v(V),g=h(()=>i.onsale),o=u(),s=u(!1);async function c(a){try{await i.listOnsale({category_id:a})}catch(e){U.axiosError(e)}}function C(a){s.value=!1,o.value=void 0,y.addToCart({product_id:a.product.id,qty:a.qty,product:a.product})}function w(a){o.value=a,s.value=!0}return B(async()=>{m("Menu"),await c()}),M(a=>{const e=a.query.category;if(e){c(Number(e));const t=i.categories.find(d=>d.id==Number(e));t&&m(t.title)}else c()}),(a,e)=>(r(),f(b,{padding:""},{default:n(()=>[l(Q,{class:"no-box-shadow"},{default:n(()=>[l(q,null,{default:n(()=>[x("div",A,[(r(!0),_(O,null,D(p(g),(t,d)=>(r(),_("div",{class:S(p(T)),key:`p-${t.id}-${d}`},[l(K,{class:"cursor-pointer",data:t,onClick:P=>w(t)},null,8,["data","onClick"])],2))),128))])]),_:1})]),_:1}),o.value?(r(),f($,{key:0,modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t)},{default:n(()=>[l(E,{data:o.value,class:"dialog-form",cart:"",onAddToCart:C},null,8,["data"])]),_:1},8,["modelValue"])):L("",!0)]),_:1}))}});export{W as default};
